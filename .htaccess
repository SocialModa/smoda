# Enable mod_rewrite
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Redirect .html requests to extensionless URLs (forces clean URLs in address bar)
  RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^\.]+)\.html\ HTTP
  RewriteRule ^([^\.]+)\.html$ /$1 [R=301,L]

  # Rewrite extensionless URLs to .html files
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME}\.html -f
  RewriteRule ^([^\.]+)/?$ $1.html [NC,L]

  # Handle directory index
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^(.*)/$ $1/index.html [L]
</IfModule>

# Enable compression
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Set proper MIME types
<IfModule mod_mime.c>
  AddType text/html .html
  AddType application/json .json
</IfModule>

# Caching
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/html "access plus 1 hour"
  ExpiresByType text/css "access plus 1 month"
  ExpiresByType application/javascript "access plus 1 month"
  ExpiresByType image/* "access plus 1 month"
</IfModule>
